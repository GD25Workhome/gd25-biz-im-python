# 轻量级 IM 服务 - 开发计划

## 一、开发计划概述

### 1.1 总体目标

开发一个轻量级 IM 服务，支持用户消息发送和 AI 自动回复功能，使用 Python + FastAPI + LangChain + Celery 技术栈。

### 1.2 脚手架依赖说明

**重要**：本项目基于 `gd25-arch-backend-python` 脚手架开发。

#### 1.2.1 脚手架提供的模块

以下模块由脚手架提供，**无需重复开发**：

| 模块 | 说明 | 来源 |
|------|------|------|
| 配置管理 | `app/config.py` | 脚手架 |
| 数据库连接 | `app/db/database.py` | 脚手架 |
| 基础模型 | `app/db/base.py` | 脚手架 |
| 会话管理 | `app/db/session.py` | 脚手架 |
| 日志工具 | `app/utils/logger.py` | 脚手架 |
| ID 生成器 | `app/utils/id_generator.py` | 脚手架 |
| 依赖注入 | `app/dependencies.py` | 脚手架 |
| 主应用入口（基础） | `app/main.py`（基础部分） | 脚手架 |
| Alembic 配置 | `alembic/env.py` | 脚手架 |
| Celery 配置（可选） | `app/tasks/celery_app.py` | 脚手架（可选） |
| WebSocket 管理器（可选） | `app/websocket/manager.py` | 脚手架（可选） |

#### 1.2.2 本项目需要开发的模块

以下模块是业务相关的，需要在本项目中开发：

| 模块 | 说明 | 开发方式 |
|------|------|----------|
| 业务模型 | `app/models/message.py`, `app/models/ai_chat_record.py` | 新建 |
| 业务 Schema | `app/schemas/message.py`, `app/schemas/ai.py` | 新建 |
| 业务 Repository | `app/repositories/message_repository.py`, `app/repositories/ai_chat_repository.py` | 新建 |
| 业务服务 | `app/services/message_service.py`, `app/services/ai_service.py` | 新建 |
| 业务 API | `app/api/message.py`, `app/api/ai.py` | 新建 |
| AI 任务 | `app/tasks/ai_reply_task.py` | 新建 |
| WebSocket 处理器 | `app/websocket/handler.py` | 新建（如果使用 WebSocket） |

#### 1.2.3 脚手架使用方式（⭐ 使用 CookieCutter 模板）

脚手架项目已支持 **CookieCutter 模板**，推荐使用 CookieCutter 方式生成项目。

**使用步骤**：

1. **安装 CookieCutter**
   ```bash
   pip install cookiecutter
   ```

2. **使用脚手架模板生成项目**
   ```bash
   # 使用本地模板
   cookiecutter /Users/m684620/work/github_GD25/gd25-arch-backend-python/cookiecutter-gd25-arch-backend-python
   
   # 或从脚手架项目目录执行
   cd /Users/m684620/work/github_GD25/gd25-arch-backend-python
   cookiecutter cookiecutter-gd25-arch-backend-python
   ```

3. **按提示输入项目信息**（交互式）
   ```
   project_name [my-project]: gd25-biz-im-python
   project_description [FastAPI 后端项目]: 轻量级 IM 服务
   author_name [GD25 Team]: Your Name
   author_email [team@gd25.com]: your.email@example.com
   python_version [3.10]: 3.10
   include_celery [y]: y          # 选择 y（需要 Celery）
   include_websocket [n]: y       # 选择 y（需要 WebSocket）
   database_type [postgresql]: postgresql
   ```

4. **进入生成的项目目录**
   ```bash
   cd gd25-biz-im-python
   ```

5. **扩展配置**：在脚手架配置基础上添加项目特定配置（如 AI 相关配置）

6. **开发业务代码**：专注于业务逻辑开发

**CookieCutter 的优势**：
- ✅ 自动替换项目名称、作者信息等变量
- ✅ 可以选择包含/排除可选模块（Celery、WebSocket）
- ✅ 一键生成完整项目结构
- ✅ 符合 Python 社区最佳实践

**详细说明**：
- CookieCutter 使用指南：`/Users/m684620/work/github_GD25/gd25-arch-backend-python/docs/边做边学/CookieCutter使用指南.md`
- 脚手架验证报告：`/Users/m684620/work/github_GD25/gd25-biz-im-python/脚手架CookieCutter验证报告.md`

### 1.3 开发原则

- **快速迭代**：每个里程碑完成后可独立测试验证
- **模块化开发**：各模块相对独立，便于并行开发
- **文档驱动**：代码与文档同步更新
- **测试验证**：每个里程碑包含测试验证环节
- **复用脚手架**：充分利用脚手架提供的基础设施，避免重复开发

### 1.4 开发周期

预计总开发时间：**2-3 周**（基于脚手架，减少基础搭建时间）

**前提条件**：✅ 脚手架项目核心模块已完成，且已支持 CookieCutter 模板

---

## 二、里程碑划分

### 里程碑 1：项目基础搭建（1-2 天）

**目标**：基于脚手架完成项目初始化，配置项目特定设置，创建业务数据库表。

**前置条件**：✅ 脚手架项目核心模块已完成，且已支持 CookieCutter 模板

#### 任务清单

0. **环境准备**
   - [x] 从 py311_gb25_base 拷贝 conda 环境到 py311_gb25_im：
     ```bash
     conda create --name py311_gb25_im --clone py311_gb25_base
     ```
   - [x] 激活新环境：`conda activate py311_gb25_im`
   - [x] 验证环境：`python --version` 和 `pip list`

1. **项目初始化（使用 CookieCutter 模板）**
   - [x] 安装 CookieCutter：`pip install cookiecutter`
   - [x] 使用脚手架模板生成项目（采用直接复制脚手架代码方式）：
     ```bash
     # 直接复制脚手架代码到当前项目
     cp -r app alembic tests requirements.txt requirements-dev.txt pytest.ini alembic.ini pyproject.toml .env.example .gitignore
     ```
   - [x] 检查并更新 `requirements.txt`（添加项目特定依赖：LangChain 等）
   - [x] 更新 `.env.example`（添加 AI 相关配置项）
   - [ ] 初始化 Git 仓库：`git init && git add . && git commit -m "Initial commit from scaffold"`
   - [ ] 更新 `README.md`（项目特定说明）

2. **配置扩展（基于脚手架配置）**
   - [x] 扩展 `app/config.py`（添加 AI 相关配置项）
     - [x] AI 服务提供商配置（ai_provider, ai_api_key, ai_base_url）
     - [x] AI 模型参数（ai_model, ai_temperature, ai_max_tokens）
   - [ ] 验证配置加载正常（待数据库配置后验证）

3. **数据库表创建（基于脚手架数据库模块）**
   - [x] 创建业务数据模型（`app/models/message.py`, `app/models/ai_chat_record.py`）
   - [x] 更新 `app/models/__init__.py` 导出新模型
   - [x] 更新 `alembic/env.py` 导入所有模型
   - [ ] 创建数据库迁移脚本（使用脚手架提供的 Alembic，需要配置数据库后执行）
   - [ ] 执行数据库迁移，创建表结构（待数据库配置后执行）

4. **主应用扩展（基于脚手架主应用）**
   - [ ] 在 `app/main.py` 中注册业务路由（预留，后续里程碑实现）
   - [ ] 验证健康检查接口正常

#### 验收标准

- [ ] 项目可以正常启动（基于脚手架）
- [ ] 数据库连接正常（使用脚手架模块）
- [ ] 健康检查接口返回正常（脚手架提供）
- [ ] 日志输出正常（使用脚手架日志工具）
- [ ] 数据库表创建成功（messages, ai_chat_records）
- [ ] 项目特定配置加载正常

#### 测试验证

```bash
# 1. 启动服务（使用 CookieCutter 生成的项目）
cd gd25-biz-im-python
uvicorn app.main:app --reload

# 2. 测试健康检查（脚手架提供）
curl http://localhost:8000/health

# 3. 检查日志输出（使用脚手架日志工具）
# 应该看到服务启动日志

# 4. 验证数据库表创建
# 使用数据库工具检查 messages 和 ai_chat_records 表是否存在

# 5. 访问 API 文档（脚手架提供）
# Swagger UI: http://localhost:8000/docs
# ReDoc: http://localhost:8000/redoc
```

---

### 里程碑 2：数据模型和仓储层（2-3 天）

**目标**：完成数据模型定义、Repository 模式实现。

#### 任务清单

1. **数据模型**
   - [ ] 实现 `app/models/message.py`（消息模型）
   - [ ] 实现 `app/models/ai_chat_record.py`（AI 聊天记录模型）
   - [ ] 创建数据库迁移脚本
   - [ ] 执行数据库迁移

2. **Schema 定义**
   - [ ] 实现 `app/schemas/message.py`（消息 Schema）
   - [ ] 实现 `app/schemas/ai.py`（AI Schema）
   - [ ] 实现数据验证规则

3. **Repository 层**
   - [ ] 实现 `app/repositories/message_repository.py`
   - [ ] 实现 `app/repositories/ai_chat_repository.py`
   - [ ] 实现基础 CRUD 操作

#### 验收标准

- [ ] 数据库表创建成功
- [ ] Repository 可以正常进行 CRUD 操作
- [ ] Schema 验证正常

#### 测试验证

```python
# 测试 Repository
from app.db.database import SessionLocal
from app.repositories.message_repository import MessageRepository
from app.schemas.message import MessageCreate

db = SessionLocal()
repo = MessageRepository(db)

# 创建消息
message_create = MessageCreate(
    content="测试消息",
    session_id="test_user"
)
message = repo.create(message_create, "test_user")
print(f"Created message: {message.message_id}")

# 查询消息
found = repo.get_by_id(message.message_id)
print(f"Found message: {found.msg_content}")

# 查询消息列表
messages, total = repo.get_by_session("test_user", 1, 20)
print(f"Total messages: {total}")
```

---

### 里程碑 3：消息服务 API（2-3 天）

**目标**：完成消息相关的 HTTP API 接口。

#### 任务清单

1. **消息服务层**
   - [ ] 实现 `app/services/message_service.py`
   - [ ] 实现消息发送逻辑
   - [ ] 实现消息查询逻辑

2. **API 路由**
   - [ ] 实现 `app/api/message.py`
   - [ ] 实现 `POST /api/message/send` 接口
   - [ ] 实现 `GET /api/message/{message_id}` 接口
   - [ ] 实现 `GET /api/message/list` 接口

3. **错误处理**
   - [ ] 实现统一错误处理
   - [ ] 实现错误响应格式

#### 验收标准

- [ ] 所有消息 API 接口正常工作
- [ ] 请求参数验证正常
- [ ] 错误处理正常
- [ ] API 文档可以正常访问

#### 测试验证

```bash
# 1. 发送消息
curl -X POST http://localhost:8000/api/message/send \
  -H "Content-Type: application/json" \
  -d '{
    "content": "测试消息",
    "session_id": "test_user"
  }'

# 2. 获取消息列表
curl "http://localhost:8000/api/message/list?session_id=test_user&page=1&page_size=20"

# 3. 获取单条消息
curl "http://localhost:8000/api/message/msg_xxx"
```

---

### 里程碑 4：Celery 异步任务（1-2 天）

**目标**：基于脚手架 Celery 配置，实现 AI 回复异步任务。

**前置条件**：脚手架 Celery 模块（里程碑 7）已完成（如果使用）

#### 任务清单

1. **Celery 配置检查（使用脚手架）**
   - [ ] 确认脚手架提供的 `app/tasks/celery_app.py` 配置正确
   - [ ] 验证 Redis Broker 连接正常
   - [ ] 验证任务序列化配置正常

2. **AI 回复任务实现**
   - [ ] 实现 `app/tasks/ai_reply_task.py`（业务任务）
   - [ ] 实现消息触发 AI 回复逻辑
   - [ ] 实现任务错误处理
   - [ ] 集成 AI 服务（调用里程碑 5 的 AIService）

3. **任务集成**
   - [ ] 在消息服务中集成 Celery 任务（调用脚手架提供的 celery_app）
   - [ ] 实现任务状态跟踪

#### 验收标准

- [ ] Celery Worker 可以正常启动
- [ ] 任务可以正常提交和执行
- [ ] 任务错误处理正常

#### 测试验证

```bash
# 1. 启动 Celery Worker
celery -A app.tasks.celery_app worker --loglevel=info

# 2. 发送消息（会触发 AI 回复任务）
curl -X POST http://localhost:8000/api/message/send \
  -H "Content-Type: application/json" \
  -d '{
    "content": "你好",
    "session_id": "test_user"
  }'

# 3. 检查 Celery 日志
# 应该看到任务执行日志
```

---

### 里程碑 5：AI 服务集成（3-4 天）

**目标**：完成 LangChain 集成和 AI 回复功能。

#### 任务清单

1. **AI 服务层**
   - [ ] 实现 `app/services/ai_service.py`
   - [ ] 集成 LangChain
   - [ ] 实现 AI 回复逻辑
   - [ ] 实现流式回复（可选）

2. **AI 配置**
   - [ ] 配置 AI 服务提供商（OpenAI/DeepSeek 等）
   - [ ] 配置 AI 模型参数
   - [ ] 实现 AI 错误处理

3. **AI 聊天记录**
   - [ ] 完善 AI 聊天记录保存逻辑
   - [ ] 实现 AI 回复状态跟踪

#### 验收标准

- [ ] AI 服务可以正常调用
- [ ] AI 回复可以正常生成
- [ ] AI 聊天记录可以正常保存
- [ ] AI 错误处理正常

#### 测试验证

```python
# 测试 AI 服务
from app.services.ai_service import AIService

ai_service = AIService()
response = ai_service.reply("你好")
print(f"AI回复: {response}")

# 测试完整流程
# 1. 发送消息
# 2. 检查 Celery 任务执行
# 3. 检查 AI 聊天记录
# 4. 验证 AI 回复内容
```

---

### 里程碑 6：WebSocket 实时通信（2-3 天）

**目标**：基于脚手架 WebSocket 管理器，实现业务 WebSocket 处理。

**前置条件**：脚手架 WebSocket 模块（里程碑 8）已完成（如果使用）

#### 任务清单

1. **WebSocket 管理器检查（使用脚手架）**
   - [ ] 确认脚手架提供的 `app/websocket/manager.py` 功能正常
   - [ ] 验证连接管理功能
   - [ ] 验证消息推送功能

2. **WebSocket 业务处理器**
   - [ ] 实现 `app/websocket/handler.py`（业务逻辑处理）
   - [ ] 实现消息接收处理（调用消息服务）
   - [ ] 实现连接断开处理
   - [ ] 集成消息服务和 AI 服务

3. **WebSocket 服务**
   - [ ] 实现 `app/services/websocket_service.py`（封装 WebSocket 管理器）
   - [ ] 集成到 AI 回复流程（在 AI 任务中调用）

4. **WebSocket 路由**
   - [ ] 在 `app/main.py` 中注册 WebSocket 路由（使用脚手架提供的管理器）
   - [ ] 实现连接认证（可选）

#### 验收标准

- [ ] WebSocket 连接可以正常建立
- [ ] 客户端可以发送消息
- [ ] 服务端可以推送消息
- [ ] 连接断开处理正常

#### 测试验证

```javascript
// 测试 WebSocket
const ws = new WebSocket('ws://localhost:8000/ws/test_user');

ws.onopen = () => {
  console.log('Connected');
  // 发送消息
  ws.send(JSON.stringify({
    type: 'send_message',
    content: '你好'
  }));
};

ws.onmessage = (event) => {
  const message = JSON.parse(event.data);
  console.log('Received:', message);
  
  if (message.type === 'ai_reply') {
    console.log('AI回复:', message.content);
  }
};
```

---

### 里程碑 7：AI 相关 API（1-2 天）

**目标**：完成 AI 相关的 HTTP API 接口。

#### 任务清单

1. **AI API 路由**
   - [ ] 实现 `app/api/ai.py`
   - [ ] 实现 `GET /api/ai/records` 接口
   - [ ] 实现分页查询

2. **API 文档**
   - [ ] 完善 API 文档注释
   - [ ] 验证 API 接口

#### 验收标准

- [ ] AI 相关 API 正常工作
- [ ] 分页查询正常
- [ ] API 文档完整

#### 测试验证

```bash
# 获取 AI 聊天记录
curl "http://localhost:8000/api/ai/records?session_id=test_user&page=1&page_size=20"
```

---

### 里程碑 8：测试和优化（3-4 天）

**目标**：完成单元测试、集成测试、压测和性能优化。

#### 任务清单

1. **单元测试**
   - [ ] 编写消息服务测试
   - [ ] 编写 AI 服务测试
   - [ ] 编写 Repository 测试

2. **集成测试**
   - [ ] 编写 API 集成测试
   - [ ] 编写 WebSocket 集成测试
   - [ ] 编写完整流程测试

3. **压测**
   - [ ] 编写 Locust 压测脚本
   - [ ] 执行压测
   - [ ] 分析压测结果

4. **性能优化**
   - [ ] 优化数据库查询
   - [ ] 优化 Celery 任务处理
   - [ ] 优化 WebSocket 连接管理

5. **文档完善**
   - [ ] 完善 API 文档
   - [ ] 完善 README
   - [ ] 完善部署文档

#### 验收标准

- [ ] 单元测试通过率 > 80%
- [ ] 集成测试通过
- [ ] 压测结果满足需求（100 并发用户）
- [ ] 性能指标达标

#### 测试验证

```bash
# 1. 运行单元测试
pytest tests/ -v

# 2. 运行集成测试
pytest tests/integration/ -v

# 3. 运行压测
locust -f tests/locustfile.py --host=http://localhost:8000
```

---

## 三、开发顺序建议

### 3.1 推荐开发顺序

```
前提：✅ 脚手架项目已完成，且已支持 CookieCutter 模板

里程碑 1（项目基础搭建）
    ↓ 使用 CookieCutter 生成项目，选择 include_celery=y, include_websocket=y
里程碑 2（数据模型和仓储层）
    ↓
里程碑 3（消息服务 API）
    ↓
里程碑 4（Celery 异步任务） ← ✅ 脚手架 Celery 模块已包含
    ↓
里程碑 5（AI 服务集成）
    ↓
里程碑 6（WebSocket 实时通信） ← ✅ 脚手架 WebSocket 模块已包含
    ↓
里程碑 7（AI 相关 API）
    ↓
里程碑 8（测试和优化）
```

### 3.2 并行开发建议

- **里程碑 2 和里程碑 3**：可以部分并行（Schema 和 Repository 可以先完成）
- **里程碑 5 和里程碑 6**：可以部分并行（AI 服务可以先完成，WebSocket 推送后集成）

### 3.3 脚手架依赖关系

- **里程碑 1**：✅ 脚手架核心模块已完成，可直接使用 CookieCutter 生成项目
- **里程碑 4**：✅ 脚手架 Celery 模块已完成，使用 CookieCutter 时选择 `include_celery: y`
- **里程碑 6**：✅ 脚手架 WebSocket 模块已完成，使用 CookieCutter 时选择 `include_websocket: y`

**重要说明**：
- ✅ 脚手架所有核心模块和可选模块均已完成
- ✅ 脚手架已支持 CookieCutter 模板，推荐使用 CookieCutter 方式生成项目
- ✅ 使用 CookieCutter 时，可以通过配置选择包含/排除可选模块
- ✅ 所有脚手架模块已验证可用，详见验证报告

---

## 四、每个里程碑的交付物

### 4.1 代码交付物

- 源代码文件
- 测试文件
- 配置文件
- 数据库迁移脚本

### 4.2 文档交付物

- 代码注释
- API 文档更新
- 测试报告
- 问题记录

### 4.3 测试交付物

- 单元测试结果
- 集成测试结果
- 压测报告（里程碑 8）

---

## 五、风险控制

### 5.1 技术风险

- **AI 服务调用失败**：实现重试机制和错误处理
- **WebSocket 连接不稳定**：实现心跳机制和自动重连
- **数据库性能问题**：优化查询，添加索引

### 5.2 进度风险

- **AI 服务集成复杂**：提前调研 LangChain 使用
- **WebSocket 实现复杂**：参考 FastAPI 官方文档
- **压测发现问题**：预留优化时间

---

## 六、开发环境准备

### 6.1 必需环境

- Python 3.10+
- PostgreSQL 14+ 或 MySQL 8.0+
- Redis 6.0+（用于 Celery 和缓存）
- Git

### 6.2 开发工具

- IDE：VS Code / PyCharm
- 数据库管理工具：DBeaver / pgAdmin
- API 测试工具：Postman / curl
- 压测工具：Locust

### 6.3 脚手架准备

- **脚手架项目地址**：`/Users/m684620/work/github_GD25/gd25-arch-backend-python`
- **脚手架使用方式**：✅ **推荐使用 CookieCutter 模板**
  ```bash
  # 1. 安装 CookieCutter
  pip install cookiecutter
  
  # 2. 使用模板生成项目
  cookiecutter /Users/m684620/work/github_GD25/gd25-arch-backend-python/cookiecutter-gd25-arch-backend-python
  ```
- **脚手架文档**：
  - CookieCutter 使用指南：`/Users/m684620/work/github_GD25/gd25-arch-backend-python/docs/边做边学/CookieCutter使用指南.md`
  - 脚手架 README：`/Users/m684620/work/github_GD25/gd25-arch-backend-python/README.md`
  - 验证报告：`/Users/m684620/work/github_GD25/gd25-biz-im-python/脚手架CookieCutter验证报告.md`
- **脚手架依赖检查**：✅ 脚手架已完全支持 CookieCutter，核心模块已完成

---

## 七、验收标准总结

### 7.1 功能验收

- [ ] 用户可以发送消息
- [ ] AI 可以自动回复消息
- [ ] 消息可以正常存储和查询
- [ ] WebSocket 实时推送正常
- [ ] 所有 API 接口正常工作

### 7.2 性能验收

- [ ] 支持 100 并发用户
- [ ] API 响应时间 < 200ms
- [ ] AI 回复时间 < 30s
- [ ] 消息不丢失

### 7.3 质量验收

- [ ] 代码注释完整
- [ ] API 文档完整
- [ ] 测试覆盖率 > 80%
- [ ] 无严重 Bug

---

## 八、脚手架集成说明

### 8.1 脚手架模块映射

| 本项目模块 | 脚手架模块 | 说明 |
|-----------|-----------|------|
| `app/config.py` | 脚手架 `app/config.py` | 扩展 AI 配置项 |
| `app/db/database.py` | 脚手架 `app/db/database.py` | 直接使用 |
| `app/db/base.py` | 脚手架 `app/db/base.py` | 直接使用 |
| `app/utils/logger.py` | 脚手架 `app/utils/logger.py` | 直接使用 |
| `app/utils/id_generator.py` | 脚手架 `app/utils/id_generator.py` | 直接使用 |
| `app/dependencies.py` | 脚手架 `app/dependencies.py` | 直接使用 |
| `app/main.py` | 脚手架 `app/main.py` | 扩展业务路由 |
| `app/tasks/celery_app.py` | 脚手架 `app/tasks/celery_app.py` | 直接使用（如果包含） |
| `app/websocket/manager.py` | 脚手架 `app/websocket/manager.py` | 直接使用（如果包含） |

### 8.2 项目特定模块

以下模块是业务相关的，需要在本项目中开发：

- `app/models/message.py` - 消息模型
- `app/models/ai_chat_record.py` - AI 聊天记录模型
- `app/schemas/message.py` - 消息 Schema
- `app/schemas/ai.py` - AI Schema
- `app/repositories/message_repository.py` - 消息仓储
- `app/repositories/ai_chat_repository.py` - AI 聊天记录仓储
- `app/services/message_service.py` - 消息服务
- `app/services/ai_service.py` - AI 服务
- `app/services/websocket_service.py` - WebSocket 服务
- `app/api/message.py` - 消息 API
- `app/api/ai.py` - AI API
- `app/tasks/ai_reply_task.py` - AI 回复任务
- `app/websocket/handler.py` - WebSocket 处理器

### 8.3 配置扩展示例

在脚手架配置基础上，扩展 AI 相关配置：

```python
# app/config.py（扩展脚手架配置）

from app.config import Settings as BaseSettings
from pydantic import Field
from typing import Optional

class IMSettings(BaseSettings):
    """IM 项目自定义配置（继承脚手架配置）"""
    # 继承脚手架的所有配置（数据库、日志、Celery、WebSocket 等）
    
    # 扩展：AI 相关配置
    ai_provider: str = Field(default="openai", description="AI 服务提供商：openai, anthropic, deepseek")
    ai_api_key: str = Field(..., description="AI API 密钥")
    ai_base_url: Optional[str] = Field(default=None, description="AI API 基础 URL（可选）")
    ai_model: str = Field(default="gpt-3.5-turbo", description="AI 模型名称")
    ai_temperature: float = Field(default=0.7, ge=0, le=2, description="AI 温度参数")
    ai_max_tokens: int = Field(default=1000, ge=1, description="AI 最大 token 数")

# 创建配置实例
settings = IMSettings()
```

**注意**：使用 CookieCutter 生成的项目已经包含了脚手架的基础配置，只需要扩展 AI 相关配置即可。

---

**文档版本**：v3.0  
**创建时间**：2025-01-27  
**最后更新**：2025-01-27  
**更新说明**：
- v3.0：更新脚手架使用方式为 CookieCutter 模板（脚手架已完全支持）
- v2.0：适配脚手架项目，明确脚手架依赖关系

